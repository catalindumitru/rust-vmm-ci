{
    "tests": [
        {
            "test_name": "build-gnu",
            "command": "./.buildkite/ci_ci_setup.py; RUSTFLAGS=\"-D warnings\" cargo build --release",
            "platform": [
                "x86_64",
                "aarch64"
            ]
        },
        {
            "test_name": "build-musl",
            "command": "./.buildkite/ci_ci_setup.py; RUSTFLAGS=\"-D warnings\" cargo build --release --target {target_platform}-unknown-linux-musl",
            "platform": [
                "x86_64",
                "aarch64"
            ]
        },
        {
            "test_name": "style",
            "command": "./.buildkite/ci_ci_setup.py; cargo fmt --all -- --check"
        },
        {
            "test_name": "unittests-gnu",
            "command": "./.buildkite/ci_ci_setup.py; cargo test --all-features --workspace",
            "platform": [
                "x86_64",
                "aarch64"
            ]
        },
        {
            "test_name": "unittests-musl",
            "command": "./.buildkite/ci_ci_setup.py; cargo test --all-features --workspace --target {target_platform}-unknown-linux-musl",
            "platform": [
                "x86_64",
                "aarch64"
            ]
        },
        {
            "test_name": "clippy",
            "command": "./.buildkite/ci_ci_setup.py; cargo clippy --workspace --bins --examples --benches --all-features --all-targets -- -D warnings",
            "platform": [
                "x86_64",
                "aarch64"
            ]
        },
        {
            "test_name": "check-warnings",
            "command": "./.buildkite/ci_ci_setup.py; RUSTFLAGS=\"-D warnings\" cargo check --all-targets --all-features --workspace",
            "platform": [
                "x86_64",
                "aarch64"
            ]
        },
        {
            "test_name": "coverage",
            "command": "./.buildkite/ci_ci_setup.py; pytest $(find . -type f -name \"test_coverage.py\")",
            "docker_plugin": {
                "privileged": true
            },
            "platform": [
                "x86_64"
            ]
        },
        {
            "test_name": "commit-format",
            "command": "./.buildkite/ci_ci_setup.py; pytest $(find . -type f -name \"test_commit_format.py\")",
            "docker_plugin": {
                "propagate-environment": true
            }
        },
        {
            "test_name": "cargo-audit",
            "command": "./.buildkite/ci_ci_setup.py; cargo audit -q"
        }
    ]
}
