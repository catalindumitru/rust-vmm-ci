{
  "steps": [
    {
      "label": "build-gnu-x86_64",
      "commands": [
        "cargo build --release"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "build-gnu-aarch64",
      "commands": [
        "cargo build --release"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "arm.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "build-musl-x86_64",
      "commands": [
        "cargo build --release --target x86_64-unknown-linux-musl"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "build-musl-aarch64",
      "commands": [
        "cargo build --release --target aarch64-unknown-linux-musl"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "arm.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "style-x86_64",
      "commands": [
        "cargo fmt --all -- --check"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "unittests-gnu-x86_64",
      "commands": [
        "cargo test --all-features --workspace"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "unittests-gnu-aarch64",
      "commands": [
        "cargo test --all-features --workspace"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "arm.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "unittests-musl-x86_64",
      "commands": [
        "cargo test --all-features --workspace --target x86_64-unknown-linux-musl"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "unittests-musl-aarch64",
      "commands": [
        "cargo test --all-features --workspace --target aarch64-unknown-linux-musl"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "arm.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "clippy-x86_64",
      "commands": [
        "cargo clippy --workspace --bins --examples --benches --all-features -- -D warnings"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "clippy-aarch64",
      "commands": [
        "cargo clippy --workspace --bins --examples --benches --all-features -- -D warnings"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "arm.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "check-warnings-x86_64",
      "commands": [
        "RUSTFLAGS=\"-D warnings\" cargo check --all-targets --all-features --workspace"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "check-warnings-aarch64",
      "commands": [
        "RUSTFLAGS=\"-D warnings\" cargo check --all-targets --all-features --workspace"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "arm.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    },
    {
      "label": "coverage-x86_64",
      "commands": [
        "pytest rust-vmm-ci/integration_tests/test_coverage.py"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true,
            "privileged": true
          }
        }
      ]
    },
    {
      "label": "commit-format-x86_64",
      "commands": [
        "pytest rust-vmm-ci/integration_tests/test_commit_format.py"
      ],
      "if": "build.env(\"BUILDKITE_REPO\") !~ /^git@/",
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true,
            "propagate-environment": true
          }
        }
      ]
    },
    {
      "label": "cargo-audit-x86_64",
      "commands": [
        "cargo audit -q"
      ],
      "retry": {
        "automatic": false
      },
      "agents": {
        "platform": "x86_64.metal",
        "os": "linux"
      },
      "plugins": [
        {
          "docker#v3.8.0": {
            "image": "rustvmm/dev:v12",
            "always-pull": true
          }
        }
      ]
    }
  ]
}